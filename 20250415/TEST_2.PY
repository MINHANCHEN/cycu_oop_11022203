import sys
from datetime import datetime, timezone

# å¼·åˆ¶è¨­ç½®ç·¨ç¢¼ç‚º UTF-8ï¼ˆé¿å…ä¸­æ–‡å­—é¡¯ç¤ºéŒ¯èª¤ï¼‰
sys.stdout.reconfigure(encoding='utf-8')

# ä¸­æ–‡æ˜ŸæœŸå°ç…§è¡¨
WEEKDAY_MAP = {
    1: 'æ˜ŸæœŸä¸€',
    2: 'æ˜ŸæœŸäºŒ',
    3: 'æ˜ŸæœŸä¸‰',
    4: 'æ˜ŸæœŸå››',
    5: 'æ˜ŸæœŸäº”',
    6: 'æ˜ŸæœŸå…­',
    7: 'æ˜ŸæœŸæ—¥'
}

# Julian Day è¨ˆç®—å…¬å¼
def to_julian_date(dt):
    if dt.tzinfo is None:
        dt = dt.replace(tzinfo=timezone.utc)

    a = (14 - dt.month) // 12
    y = dt.year + 4800 - a
    m = dt.month + 12 * a - 3
    jdn = dt.day + ((153 * m + 2) // 5) + 365 * y
    jdn += y // 4 - y // 100 + y // 400 - 32045
    jd = jdn + (dt.hour - 12) / 24 + dt.minute / 1440 + dt.second / 86400
    return jd

def analyze_datetime(input_str):
    try:
        # è§£æè¼¸å…¥çš„æ™‚é–“å­—ä¸²
        input_dt = datetime.strptime(input_str, "%Y-%m-%d %H:%M")
    except ValueError:
        return "âŒ æ™‚é–“æ ¼å¼éŒ¯èª¤ï¼Œè«‹ä½¿ç”¨æ­£ç¢ºæ ¼å¼ï¼šYYYY-MM-DD HH:MM"

    # ç•¶ä¸‹æ™‚é–“ï¼ˆUTCï¼‰
    now_dt = datetime.now(timezone.utc)

    # Julian Dates
    input_jd = to_julian_date(input_dt)
    now_jd = to_julian_date(now_dt)

    # è¨ˆç®—ç¶“éçš„å¤ªé™½æ—¥æ•¸
    days_passed = now_jd - input_jd

    # ä¸­æ–‡æ˜ŸæœŸå¹¾
    weekday_str = WEEKDAY_MAP[input_dt.isoweekday()]

    # ç•¶å¹´çš„ç¬¬å¹¾å¤©
    day_of_year = input_dt.timetuple().tm_yday

    # å›å‚³æ‰€æœ‰çµæœ
    return {
        "weekday": weekday_str,
        "day_of_year": day_of_year,
        "julian_days_passed": round(days_passed, 6)
    }

if __name__ == "__main__":
    user_input = input("è«‹è¼¸å…¥æ™‚é–“ï¼ˆæ ¼å¼ç‚º YYYY-MM-DD HH:MMï¼‰ï¼š")
    result = analyze_datetime(user_input)

    if isinstance(result, str):
        print(result)  # éŒ¯èª¤è¨Šæ¯
    else:
        print(f"ğŸ“… æ˜ŸæœŸå¹¾ï¼š{result['weekday']}")
        print(f"ğŸ“† ç•¶å¹´çš„ç¬¬ {result['day_of_year']} å¤©")
        print(f"ğŸ•’ å¾è©²æ™‚é–“åˆ°ç¾åœ¨å…±ç¶“éäº† {result['julian_days_passed']} å€‹å¤ªé™½æ—¥ï¼ˆJulian Daysï¼‰")
